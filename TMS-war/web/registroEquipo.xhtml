<html class="fixed"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">



    <h:body>
        <ui:composition template="/template/template.xhtml">

            <ui:define name="content">
                <h:form>
                    <p:growl id="growl" showDetail="true" sticky="true" />
                    <h:panelGroup  id="paneles">
                        <h:panelGroup rendered="#{equipoJSFBean.numPanel==1}">

                            <!-- start: page -->

                            <div class="row col-sm-12 col-md-12 col-lg-12">
                                <div class=" col-sm-12 col-md-6 col-lg-12" >
                                    <section class="panel">
                                        <header class="panel-heading">
                                            <div class="panel-actions">
                                                <a href="#" class="panel-action panel-action-toggle" data-panel-toggle=""></a>
                                                <a href="#" class="panel-action panel-action-dismiss" data-panel-dismiss=""></a>
                                            </div>

                                            <h2 class="panel-title">Detalles de Equipo </h2>
                                        </header>
                                        <div class="panel-body">
                                            <form class="form-horizontal form-bordered" method="get">
                                                <div class="form-group" style="text-align: left;">

                                                    <label class="col-md-2 control-label" for="inputDisabled">N° Inventario</label>
                                                    <div class="col-md-2">
                                                        <p:inputText class="form-control"   value="#{equipoJSFBean.id}"/>
                                                    </div>
                                                    
                                                    <label class="col-md-2 control-label" for="inputDisabled">Serial</label>
                                                    <div class="col-md-2">
                                                        <p:inputText class="form-control"   value="#{equipoJSFBean.serial}"/>
                                                    </div>

                                                    <div class="col-md-2">

                                                        <p:commandLink class="mb-xs mt-xs mr-xs btn btn-info" id="buscar"  
                                                                       value="Buscar"
                                                                       action="#{equipoJSFBean.consultarEquipo}" 
                                                                       update="@all"
                                                                       />
                                                    </div>

                                                    <div class="col-md-2">
                                                        <p:commandLink class="mb-xs mt-xs mr-xs btn btn-info" 
                                                                       id="nuevo"  
                                                                       value="Nuevo"
                                                                       action="#{equipoJSFBean.crearEquipo}"                                                                  update="@form"
                                                                       />
                                                    </div>

                                                </div>



                                            </form>

                                        </div>
                                    </section>

                                </div>
                            </div>  

                            <div class="row col-sm-12 col-md-12 col-lg-12">
                                <div class="col-sm-12 col-md-12 col-lg-12"  >
                                    <section class="panel">

                                        <header class="panel-heading">
                                            <div class="panel-actions">
                                                <a href="#" class="panel-action panel-action-toggle" 
                                                   data-panel-toggle=""></a>
                                                <a href="#" 
                                                   class="panel-action panel-action-dismiss" 
                                                   data-panel-dismiss=""></a>
                                            </div>
                                            <h2 class="panel-title">Equipos</h2>
                                            <hr/>


                                            <p:dataTable styleClass="table table-bordered table-striped mb-none"
                                                         style="text-align: center;"
                                                         value="#{equipoJSFBean.lstEquipos}" 
                                                         var="item" 
                                                         paginatorAlwaysVisible="false"
                                                         paginatorPosition="´bottom"
                                                         paginator="true" 
                                                         emptyMessage="No se encotraron registros">
                                                <p:column headerText="Acciones">
                                                    <p:commandLink update="@form" 
                                                                   actionListener="#{equipoJSFBean.editarEquipo}">  
                                                                   <i class="fa fa-pencil"></i> 
                                                        <f:attribute name="equipo" 
                                                                     value="#{item}">
                                                        </f:attribute>
                                                    </p:commandLink>


                                                </p:column>

                                                <p:column headerText="Inventario" >
                                                    #{item.idequipo}
                                                </p:column>
                                                <p:column headerText="Serial" >
                                                    #{item.serial}
                                                </p:column>
                                                <p:column headerText="Marca" >
                                                    #{item.marca}
                                                </p:column>
                                                <p:column headerText="Modelo" >
                                                    #{item.modelo}
                                                </p:column>
                                                <p:column headerText="Tipo" >
                                                    #{item.tipoequipo.tipoequipo}
                                                </p:column>
                                                <p:column headerText="S.O" >
                                                    #{item.so.sistemaoperativo}
                                                </p:column>
                                                <p:column headerText="Descripción" >
                                                    #{item.descripcion}
                                                </p:column>
                                                <p:column headerText="Estado" >
                                                    #{item.estado.estado}
                                                </p:column>
                                                <p:column headerText="Fecha Ingreso" >
                                                    #{item.fechaIngreso}
                                                </p:column>
                                                <p:column headerText="Nombre" >
                                                    #{item.funcionario.persona.nombres}
                                                </p:column>
                                                <p:column headerText="Proveedor" >
                                                    #{item.proveedor.nombreproveedor}
                                                </p:column>
                                                <p:column headerText="Tel" >
                                                    #{item.proveedor.telefono}
                                                </p:column>


                                            </p:dataTable>  





                                        </header>
                                    </section>
                                </div>
                            </div>

                        </h:panelGroup>


                        <h:panelGroup rendered="#{equipoJSFBean.numPanel==2}">


                            <div class="row col-sm-12 col-md-12 col-lg-12">
                                <div class=" col-sm-12 col-md-6 col-lg-12" >
                                    <section class="panel">
                                        <header class="panel-heading">
                                            <div class="panel-actions">
                                                <a href="#" class="panel-action panel-action-toggle" data-panel-toggle=""></a>
                                                <a href="#" class="panel-action panel-action-dismiss" data-panel-dismiss=""></a>
                                            </div>

                                            <h2 class="panel-title">Detalles de Equipo </h2>
                                        </header>
                                        <div class="panel-body">
                                            <form class="form-horizontal form-bordered">

                                                <div class="form-group" style="text-align: left;">


                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  value="Serial" >
                                                            <span class="required"> * </span>
                                                        </p:outputLabel>
                                                        <div class="col-md-6">
                                                            <p:inputText class="form-control"  
                                                                         placeholder="Serial"
                                                                         value="#{equipoJSFBean.equipo.serial}" 
                                                                         required="true"
                                                                         requiredMessage="Favor diligenciar el campo Serial" 
                                                                         maxlength="25"
                                                                         /> 
                                                            

                                                        </div>

                                                    </div>

                                                    <hr />

                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  
                                                                       value="Marca" >
                                                            <span class="required"> * </span>
                                                        </p:outputLabel>
                                                        <div class="col-md-6">
                                                            <p:inputText class="form-control"  
                                                                         placeholder="Marca"  
                                                                         value="#{equipoJSFBean.equipo.marca}" 
                                                                         required="true"
                                                                         maxlength="50"
                                                                         requiredMessage="Favor diligenciar el campo Marca" />
                                                            
                                                        </div>

                                                    </div>

                                                    <hr />

                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  
                                                                       value="Modelo" >
                                                            <span class="required"> * </span>
                                                        </p:outputLabel>
                                                        <div class="col-md-6">
                                                            <p:inputText class="form-control"
                                                                         placeholder="Modelo"  
                                                                         value="#{equipoJSFBean.equipo.modelo}" 
                                                                         required="true"
                                                                         requiredMessage="Favor diligenciar el campo Modelo"/>
                                                            
                                                        </div>

                                                    </div>

                                                    <hr />

                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  
                                                                       value="Fecha de Ingreso" />
                                                        <div class="col-md-6">
                                                            <p:calendar  id="button" 
                                                                         value="#{equipoJSFBean.equipo.fechaIngreso}"  
                                                                         pattern="MM/dd/yyyy" 
                                                                         showOn="button" >
                                                            </p:calendar>
                                                        </div>

                                                    </div>

                                                    <hr />

                                                    <div class="form-group" >


                                                        <h:panelGrid columns="2" class="col-md-12">
                                                            <p:outputLabel value="Tipo Equipo"  
                                                                           class="col-md-6 control-label" >
                                                                <span class="required"> * </span>
                                                            </p:outputLabel>
                                                            <h:selectOneMenu value="#{equipoJSFBean.equipo.tipoequipo.idtipoequipo}" 
                                                                             class="col-md-6 form-control" >
                                                                <f:selectItem class="col-md-6 form-control" 
                                                                              itemLabel="Seleccione una opción" 
                                                                              itemValue="" /> 
                                                                <f:selectItems  class="col-md-6 form-control" 
                                                                                value="#{equipoJSFBean.listTipoEquipo}" 
                                                                                var="tipos" itemLabel="#{tipos.tipoequipo}"
                                                                                itemValue="#{tipos.idtipoequipo}">

                                                                </f:selectItems>
                                                            </h:selectOneMenu>
                                                            
                                                        </h:panelGrid>

                                                    </div>

                                                    <hr />
                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  
                                                                       value="Descripción" />
                                                        <div class="col-md-6">
                                                            <p:inputText class="col-md-6 form-control"
                                                                         type="text" 
                                                                         placeholder="Descripción"  
                                                                         value="#{equipoJSFBean.equipo.descripcion}" 
                                                                         maxlength="2000"/>
                                                        </div>

                                                    </div>   
                                                    <hr />
                                                    <div class="form-group">

                                                        <h:panelGrid columns="2" class="col-md-12">


                                                            <p:outputLabel value="Estado Equipo"  
                                                                           class=" col-md-6 control-label" />
                                                            <h:selectOneMenu value="#{equipoJSFBean.equipo.estado.idestado}" 
                                                                             class="col-md-6 form-control" >
                                                                <f:selectItem class="col-md-6 form-control" 
                                                                              itemLabel="Seleccione una opción" 
                                                                              itemValue="" /> 
                                                                <f:selectItems  class="col-md-6 form-control" 
                                                                                value="#{equipoJSFBean.lstEstado}" 
                                                                                var="tipos" 
                                                                                itemLabel="#{tipos.estado}"
                                                                                itemValue="#{tipos.idestado}">

                                                                </f:selectItems>
                                                            </h:selectOneMenu>

                                                        </h:panelGrid>

                                                    </div>
                                                    <hr />
                                                    <div class="form-group">

                                                        <h:panelGrid columns="2" class="col-md-12" >

                                                            <p:outputLabel value="Sistema Operativo"  
                                                                           class="col-md-6 control-label" />
                                                            <h:selectOneMenu value="#{equipoJSFBean.equipo.so.idso}"  
                                                                             class="col-md-6 form-control">
                                                                <f:selectItem class="col-md-6 form-control" 
                                                                              itemLabel="Seleccione una opción" 
                                                                              itemValue="" /> 
                                                                <f:selectItems class="col-md-6 form-control" 
                                                                               value="#{equipoJSFBean.lstSos}" 
                                                                               var="sos" itemLabel="#{sos.sistemaoperativo}"
                                                                               itemValue="#{sos.idso}">

                                                                </f:selectItems>
                                                            </h:selectOneMenu>

                                                        </h:panelGrid>
                                                    </div>
                                                    <hr />

                                                    <div class="form-group">

                                                        <h:panelGrid columns="3" class="col-md-12" >

                                                            <p:outputLabel value="Fabricante Proveedor" 
                                                                           class="col-md-6 control-label" />
                                                            <h:selectOneMenu 
                                                                value="#{equipoJSFBean.equipo.proveedor.idproveedor}" 
                                                                class=" col-md-6 form-control" 
                                                                id="idproveedor">
                                                                <f:selectItem class="col-md-6 form-control" 
                                                                              itemLabel="Seleccione una opción" 
                                                                              itemValue="" /> 
                                                                <f:selectItems class="col-md-6 form-control" 
                                                                               noSelectionValue="Seleccione"
                                                                               value="#{equipoJSFBean.lstProveedor}" 
                                                                               var="tipos" 
                                                                               itemLabel="#{tipos.nombreproveedor}"
                                                                               itemValue="#{tipos.idproveedor}">

                                                                </f:selectItems>
                                                            </h:selectOneMenu>


                                                            <h:message  for="idproveedor"/>
                                                        </h:panelGrid>

                                                    </div>

                                                    <hr/>

                                                    <div class="form-group">

                                                        <p:outputLabel class="col-md-6 control-label"  value="Usuario Responsable" />
                                                        <div class="col-md-6">
                                                            <p:inputText  styleClass="form-control" 
                                                                          readonly="true" 
                                                                          value="#{equipoJSFBean.funcionario.persona.primernombre}"> 

                                                            </p:inputText>
                                                            <h:panelGrid columns="2" cellpadding="5">

                                                                <p:commandButton class="mb-xs mt-xs mr-xs btn btn-default" id="Asignar"
                                                                                 value="Asignar"
                                                                                 action="#{equipoJSFBean.asignarUsuario}" 
                                                                                 update="@form"
                                                                                 immediate="true"
                                                                                 ajax="true"
                                                                                 /> 

                                                                <p:commandButton class="mb-xs mt-xs mr-xs btn btn-default" value="Limpiar" />
                                                            </h:panelGrid>



                                                        </div>

                                                    </div>   
                                                    <hr />


                                                    <div class="col-md-6 " align="right">

                                                        <p:commandLink class="mb-xs mt-xs mr-xs btn btn-info" 
                                                                       id="Guardar" 
                                                                       value="Guardar" 
                                                                       update="@form"
                                                                       ajax="true"

                                                                       action="#{equipoJSFBean.guardarEquipo}"
                                                                       />
                                                    </div>

                                                    <div class="col-md-6 " align="left">
                                                        <p:commandLink class="mb-xs mt-xs mr-xs btn btn-info" 
                                                                       id="cancelar"  
                                                                       value="Cancelar"
                                                                       action="#{equipoJSFBean.regresar}" 
                                                                       immediate="true" 
                                                                       update="@form"
                                                                       />
                                                    </div>



                                                </div>



                                            </form>

                                        </div>
                                    </section>

                                </div>
                            </div>  

                        </h:panelGroup>

                        <h:panelGroup rendered="#{equipoJSFBean.numPanel==3}">

                            <div class="row col-sm-12 col-md-12 col-lg-12">
                                <div class=" col-sm-12 col-md-6 col-lg-12" >
                                    <section class="panel">
                                        <header class="panel-heading">
                                            <div class="panel-actions">
                                                <a href="#" 
                                                   class="panel-action panel-action-toggle" 
                                                   data-panel-toggle=""></a>
                                                <a href="#" 
                                                   class="panel-action panel-action-dismiss" 
                                                   data-panel-dismiss=""></a>
                                            </div>

                                            <h2 class="panel-title">Asignar Usuario </h2>
                                        </header>
                                        <div class="panel-body">
                                            <form class="form-horizontal form-bordered">

                                                <div class="form-group" style="text-align: left;">

                                                    <br/>
                                                    <br/>


                                                    <p:inputText  class="form-control" value="#{usuarioJSFBean.textoConsulta}"  >
                                                    </p:inputText> 


                                                    <p:commandButton  class="mb-xs mt-xs mr-xs btn btn-default" value="Buscar Usuario"  
                                                                      partialSubmit="true" immediate="true"
                                                                      action="#{usuarioJSFBean.consutarUsuarioAsignar}" 
                                                                      update="tblUsb"/>


                                                    <p:dataTable styleClass="table table-bordered mb-none" 
                                                                 var="item" 
                                                                 id="tblUsb"
                                                                 widgetVar="tblUsb"
                                                                 paginatorAlwaysVisible="false"
                                                                 emptyMessage="No se encotraron registros"
                                                                 value="#{usuarioJSFBean.lstUsuariosAsignar}" 
                                                                 >

                                                        <p:column headerText="N° Documento" >
                                                            <p:commandLink value="#{item.funcionario.persona.numerodocumento}" 
                                                                           update="@form"
                                                                           ajax="true"
                                                                           actionListener="#{equipoJSFBean.asignarUsuarioaequipo}"
                                                                           >
                                                                <f:setPropertyActionListener target="#{equipoJSFBean.usuario}" value="#{item}" />

                                                            </p:commandLink>
                                                        </p:column>    
                                                        <p:column headerText="Primer Nombre" >
                                                            #{item.funcionario.persona.primernombre}
                                                        </p:column>
                                                        <p:column headerText="Segundo Nombre" >
                                                            #{item.funcionario.persona.segundonombre}
                                                        </p:column>
                                                        <p:column headerText="Apellido" >
                                                            #{item.funcionario.persona.primerapellido}
                                                        </p:column>
                                                        <p:column headerText="Nombre" >
                                                            #{item.funcionario.persona.segundoapellido}
                                                        </p:column>

                                                    </p:dataTable> 


                                                </div>
                                            </form>
                                        </div>
                                    </section>
                                </div>
                            </div>
                        </h:panelGroup>                 



                    </h:panelGroup>
                </h:form>







             




            </ui:define>
        </ui:composition>


    </h:body>
</html>